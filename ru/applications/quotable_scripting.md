Квотированное скриптование
==========================

Возможность применения квотированного скриптования строится на возможности [анализируемого сэндбоксинга](analyzable_sanboxing.md) языка <b>HardCode</b>.

Обычно варианты применения подразумевают запуск скриптов от 3-й стороны.

Здесь мы рассмотрим вариант применения квотируемых скриптов в киберспорте, а именно в жанре RTS (Real Time Strategy).

## RTS с квотированными скриптами

Рассмотрим ситуацию вокруг StarCraft 2 - непревзойдённого фаворита жанра:
1. В игре много возможностей как для микроконтроля, так и для макро.
2. Сейчас всё больший ажиотаж набирают игры ботов, в т. ч., ботов на нейронках: боты регулярно удивляют необычными эффективными недоступными для человека подходами как в микроконтроле, так и в махромеханике.
3. Некоторые игроки не обходят стороной и читы. Причём, несмотря на неэтичность применения читов, в отличие от 3D шутеров в StarCraft 2 читы интересные.

Таким образом, многим игрокам хотелось бы получить больше сложных, но удобных механизмов управления армией и экономикой.
Основным способом предоставления таких возможностей являются внутриигровые скрипты.
Но на сегодняшний день нет языка программирования подходящего для задачи.

Рассмотрим ситуацию с языком Lua (лучшим из того, что есть сейчас):
1. Нельзя гарантировать, что функция-обработчик не зависнет.
   В ней достаточно написать:
   ```lua
   while true do
   end
   ```
   Такую функцию нельзя прервать не убив процесс.
2. Даже если функция не зависнет, нельзя понять, как долго она будет выполняться и каких ресурсов потребует.
   Майнит ли она биткойны? Использует ли логику огромной нейронки для полной замены человека роботом?
3. Функции на Lua в несколько раз медленнее аналогов в языках со статической типизацией.

Язык <b>HardCode</b> блестяще решает перечисленные проблемы:
1. Встроенный анализатор сразу покажет вычислительную сложность любой компилируемой функции.
2. Функция не только не сможет выполняться чрезмерно долго, но и обязана будет ещё на этапе линковки вписаться в квоты, заданные кибер-спортивной дисциплиной.
   Квоты эти не зависят от железа, на котором запускается игра, а являются логическими величинами исходящими из семантики языка программирования.
   Таким образом решается вопрос честных игровых условий и игрового баланса.
3. Производительность таких функций может в некоторых случаях обойти даже C.

Таким образом, добавление скриптовых обработчиков возможно на:
- команды юнитам и зданиям
- глобальные команды
- регулярные события каждый фрэйм
- обработчики оповещений

В качестве примеров применения скриптов можно привести следующие задачи:
- управление приоритезацией атаки
- управление строем перемещения и атаки
- разделение армий комбинированного состава в нужной пропорции
- управление производством рабочих и армии, постройкой зданий
- переключение приоритетов на постройку рабочих и боевых юнитов
- изменение строя в ответ на зональные атаки (<i>например, чтобы марики разбегались от микоза и штормов</i>)
- управление кастерами
- управление забеганиями
